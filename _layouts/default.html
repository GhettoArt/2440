<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{{ site.title }}</title>
        <meta name="description" content="{{ site.description }}">
        <link rel="canonical" href="{{ site.url }}">

        <meta property="og:site_name" content="{{ site.title }}" />
        <meta property="og:description" content="{{ site.description }}" />
        <meta property="og:url" content="{{ site.url }}" />
        <meta property="og:image" content="{{ site.social_image }}" />
        <meta property="og:locale" content="fr_FR" />

        <link rel="stylesheet" href="{{ "css/bootstrap.min.css" | prepend: site.baseurl }}">
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="{{ "css/dekar.css" | prepend: site.baseurl }}">
        <link rel="stylesheet" href="{{ "css/main.css" | prepend: site.baseurl }}">
    </head>

    <body>

        <nav class="navbar navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nav-small">
                        <span class="sr-only">Basculer la navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">
                        <img class="logo" src="images/logo.png" alt="2440 Festival" width="100"/>
                    </a>
                </div>
                <div class="collapse navbar-collapse" id="nav-small">
                    <ul class="nav navbar-nav">
                        <li><a data-scroll data-options='{"offset": 50}' href="#intro">Le Concept</a></li>
                        <li><a data-scroll data-options='{"offset": 50}' href="#prog">Programmation</a></li>
                        <li><a data-scroll data-options='{"offset": 50}' href="#tickets">Billetterie</a></li>
                        <li><a data-scroll data-options='{"offset": 50}' href="#access">Localisation</a></li>
                        <li><a data-scroll data-options='{"offset": 50}' href="#partnership">Partenaires</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="tickets-shortcut hidden-sm hidden-xs">
            <a data-scroll data-options='{"offset": 50}' href="#tickets">
                <img src="/images/vessel.png" title="Accéder à la Billetterie" />
            </a>
        </div>

        {% include introduction.html %}
        {% include programmation.html %}
        {% include tickets.html %}
        {% include access.html %}
        {% include footer.html %}

        <script type="text/javascript" src="{{ "js/jquery.min.js" | prepend: site.baseurl }}"></script>
        <script type="text/javascript" src="{{ "js/bootstrap.min.js" | prepend: site.baseurl }}"></script>
        <script type="text/javascript" src="{{ "js/bind-polyfill.min.js" | prepend: site.baseurl }}"></script>
        <script type="text/javascript" src="{{ "js/smooth-scroll.min.js" | prepend: site.baseurl }}"></script>
        <script type="text/javascript" src="//maps.googleapis.com/maps/api/js?key=AIzaSyAL-NFzG50HE8dM9dJQBD1eLP5-7dEyUoo"></script>
        <script type="text/javascript" charset="utf-8">
            $(function(){
                smoothScroll.init();

                var toggleOnScroll = function(scrollTop, f1, f2) {
                    return function() {
                        if ($(this).scrollTop() > scrollTop) {
                            f1();
                        } else {
                            f2();
                        }
                    };
                };
                var toggleNavBar = toggleOnScroll(
                    100,
                    function() {
                        $('.navbar-default').css('opacity', 1);
                    },
                    function() {
                        $('.navbar-default').css('opacity', 0);
                    }
                );
                var toggleVessel = toggleOnScroll(
                    0,
                    function() {
                        $('.tickets-shortcut').addClass('small');
                    },
                    function() {
                        $('.tickets-shortcut').removeClass('small');
                    }
                );

                toggleNavBar();
                toggleVessel();
                $(window).on('scroll', toggleNavBar);
                $(window).on('scroll', toggleVessel);

                var normalizeHeights = function($a, $b) {
                    if ($a.height() > $b.height()) {
                        $b.css('height', $a.css('height'));
                    } else {
                        $a.css('height', $b.css('height'));
                    }
                };
                if (window.innerWidth >= 1200) {
                    normalizeHeights($('#tickets .after'), $('#tickets .pricing'));
                }
            });

            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-13080092-2', 'auto');
            ga('send', 'pageview');

            var initMap = function() {
                var myLatlng = new google.maps.LatLng(47.1814,-1.572247);
                var mapOptions = {
                    center: myLatlng,
                    scrollwheel: false,
                    zoom: 12
                };
                var map = new google.maps.Map($('#access .map').get(0), mapOptions);
                new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    animation: google.maps.Animation.DROP
                });

                // Map styling
                var styles = [
                    {
                        stylers: [
                            { hue: "#7e551f" },
                            { saturation: -20 }
                        ]
                    }
                ];
                map.setOptions({styles: styles});
            };
            google.maps.event.addDomListener(window, 'load', initMap);
        </script>
    </body>
</html>
